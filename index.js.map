{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49359478-baf2a77463771851b04b26e30';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport const PAGE_SIZE = 15;\n\nexport async function fetchPixabay(searchQuery, currentPage = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: currentPage,\n        per_page: PAGE_SIZE,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n  }\n}\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = null;\n\nexport function populateGallery(pixabays = []) {\n  const imagesContainer = document.querySelector('.gallery');\n\n  const galleryHTML = pixabays\n    .map(image => {\n      return `\n      <div class=\"card-container\">\n        <div class=\"card\">\n          <a href=\"${image.largeImageURL}\">\n            <img class=\"card-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          </a>\n          <div class=\"card-body\">\n            <div class=\"card-item\">\n              <h4>Likes</h4><p>${image.likes}</p>\n            </div>\n            <div class=\"card-item\">\n              <h4>Views</h4><p>${image.views}</p>\n            </div>\n            <div class=\"card-item\">\n              <h4>Comments</h4><p>${image.comments}</p>\n            </div>\n            <div class=\"card-item\">\n              <h4>Downloads</h4><p>${image.downloads}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n    })\n    .join('');\n\n  imagesContainer.insertAdjacentHTML('beforeend', galleryHTML);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a');\n  } else {\n    lightbox.refresh();\n  }\n}\nexport function clearGallery() {\n  const imagesContainer = document.querySelector('.gallery');\n  imagesContainer.innerHTML = '';\n}\n","import axios from 'axios';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchPixabay, PAGE_SIZE } from './js/pixabay-api';\nimport { populateGallery, clearGallery } from './js/render-functions';\nlet currentPage = 1;\nlet searchQuery = '';\nconst pixabayRefs = {\n  form: document.querySelector('.form'),\n  searchQueryInput: document.querySelector('.form-input'),\n  imagesContainer: document.querySelector('.gallery'),\n  button: document.querySelector('.form-button'),\n  loader: document.querySelector('.loader'),\n  buttomLoadMore: document.querySelector('.add-posts-button'),\n};\n\npixabayRefs.form.addEventListener('submit', async event => {\n  event.preventDefault();\n  const searchQuery = pixabayRefs.searchQueryInput.value.trim();\n  currentPage = 1;\n  const container = document.querySelector('.gallery');\n  container.innerHTML = '';\n  if (!searchQuery) {\n    iziToast.error({\n      messageColor: '#FAFAFB',\n      iconUrl: './img/bi_x-octagon.svg',\n      iconColor: 'white',\n      message: 'Please enter a search word!',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      color: '#fafafb',\n    });\n    return;\n  }\n  // clearGallery();\n\n  pixabayRefs.loader.style.display = 'inline-block';\n\n  try {\n    const response = await fetchPixabay(searchQuery);\n    const totalPages = Math.ceil(response.totalHits / PAGE_SIZE);\n\n    if (totalPages > currentPage) {\n      pixabayRefs.buttomLoadMore.style.display = 'flex';\n    } else {\n      pixabayRefs.buttomLoadMore.style.display = 'none';\n      iziToast.error({\n        messageColor: '#FAFAFB',\n        iconUrl: './img/bi_x-octagon.svg',\n        iconColor: 'white',\n        message:\n          'We are sorry, but you have reached the end of search results.',\n        position: 'topRight',\n        backgroundColor: '#4e75ff',\n        color: '#fafafb',\n      });\n    }\n\n    if (response.hits.length === 0) {\n      // Якщо зображень немає, генеруємо помилку\n      throw new Error('No images found for this query');\n    }\n    populateGallery(response.hits);\n    console.log(response);\n  } catch (error) {\n    iziToast.error({\n      messageColor: '#FAFAFB',\n      iconUrl: './img/bi_x-octagon.svg',\n      iconColor: 'white',\n      message:\n        'Sorry, there are no images matching</br> your search query. Please, try again!',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      color: '#fafafb',\n    });\n  } finally {\n    pixabayRefs.loader.style.display = 'none';\n  }\n});\n\npixabayRefs.buttomLoadMore.addEventListener('click', async event => {\n  event.preventDefault();\n  const searchQuery = pixabayRefs.searchQueryInput.value.trim();\n  currentPage++;\n\n  try {\n    const response = await fetchPixabay(searchQuery, currentPage);\n\n    const card = document\n      .querySelector('.card-container')\n      .getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: card * 2,\n      behavior: 'smooth',\n    });\n\n    populateGallery(response.hits);\n    console.log(response);\n\n    pixabayRefs.buttomLoadMore.style.display = 'flex';\n\n    if (\n      response.hits > PAGE_SIZE ||\n      Math.ceil(response.totalHits / PAGE_SIZE) > currentPage\n    ) {\n      pixabayRefs.buttomLoadMore.style.display = 'flex';\n    } else {\n      pixabayRefs.buttomLoadMore.style.display = 'none';\n    }\n  } catch (error) {\n    iziToast.error({\n      messageColor: '#FAFAFB',\n      iconUrl: './img/bi_x-octagon.svg',\n      iconColor: 'white',\n      message:\n        'Sorry, there are no images matching</br> your search query. Please, try again!',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      color: '#fafafb',\n    });\n  }\n});\n"],"names":["API_KEY","BASE_URL","PAGE_SIZE","fetchPixabay","searchQuery","currentPage","axios","error","lightbox","populateGallery","pixabays","imagesContainer","galleryHTML","image","SimpleLightbox","pixabayRefs","event","container","iziToast","response","card"],"mappings":"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"}